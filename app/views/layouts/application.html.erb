<!DOCTYPE html>
<html ng-app="AnonymousApp">
<head>
  <title>&#x2800;</title>
  <%= favicon_link_tag '/favicon.ico' %>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>

<div id="app-container" ng-controller="AppController">
  <div id="form-header">
    <div id="sign-in-form" ng-hide="!!isSignedIn() || !!signup" ng-init"signup=false">
      <form ng-submit="signIn()">
        <input type="text" class="username" placeholder="username" ng-model="inputUsername"></input><input type="password" class="password" placeholder="password" ng-model="inputPassword"></input><input type="submit" value="Sign In"></input>
      </form>
      <p class="sign-up" ng-click= "signup=true">
        No account?
        <%= link_to "Sign Up!", 'javascript:void(0)' %>
      </p>
    </div>
    <div id="sign-in-form" ng-hide="!!isSignedIn() || !signup">
      <form ng-submit="signUp()">
        <input type="text" class="username" placeholder="username" ng-model="inputUsername"></input><input type="password" class="password" placeholder="password" ng-model="inputPassword"></input><input type="submit" value="Sign Up"></input>
      </form>
      <p class="sign-up" ng-click= "signup=false">
        Already have an account?
        <%= link_to "Sign In!", 'javascript:void(0)' %>
      </p>
    </div>
    <div id="post-form" ng-hide="!isSignedIn()"">
      <form ng-submit="createPost()">
        <div class="text-container">
          <textarea class="content" ng-model="newPostContent" placeholder="your amazing post goes here"></textarea>
        </div>
        <div class="form-controls">
          <input type="submit" value="Post"></input>
        </div>
      </form>
    </div>
  </div>
  
  <div id="main-dish" class = container>
    <ol class="row unstyled">
      <li ng-repeat="post in posts" class="card">
        <div class="vote">
          <div class="vote_up"  ng-click= "upvote(post)"></div>
          <div class="vote_total">
            {{ post.net_upvotes }}
          </div>
          <div class="vote_down" ng-click= "downvote(post)"></div>
        </div>
        
        <div class="card-body">
          <pre>{{ post.content }}</pre>
        </div>
        <div class="location">
          <span class="distance">
            {{ post.distance.meters | number:0 }} meters
          </span>
          <span class="direction">
            {{ post.direction }}
          </span>
        </div>
        <div class="time">
          {{ post.created_at }}
        </div>
        <div type = "button" class = "delete visible-{{ isOwner(post) }}" ng-click=" delete($index)"> x </div>
      </li>
    </ol>
    
    
  </div>
</div>

<div id="footer">
  <p>Made with
    <%= link_to "Ruby on Rails", 'http://rubyonrails.org/' %>,
    <%= link_to "CoffeeScript", 'http://coffeescript.org/' %>,
    <%= link_to "AngularJS", 'http://angularjs.org/' %>,
    and our own house blend of love and contempt for humanity.
  </p>
  <p>
    <%= link_to "Come work for us", 'http://github.com/benchristel/anonymouspost#contributing' %>!
    We won't pay you.
  </p>
</div>

</body>
</html>
